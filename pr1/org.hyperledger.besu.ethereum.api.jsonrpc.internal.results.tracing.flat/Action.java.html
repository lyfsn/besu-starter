<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Action.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">besu</a> &gt; <a href="index.source.html" class="el_package">org.hyperledger.besu.ethereum.api.jsonrpc.internal.results.tracing.flat</a> &gt; <span class="el_source">Action.java</span></div><h1>Action.java</h1><pre class="source lang-java linenums">/*
 * Copyright ConsenSys AG.
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use this file except in compliance with
 * the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on
 * an &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */
package org.hyperledger.besu.ethereum.api.jsonrpc.internal.results.tracing.flat;

import static com.fasterxml.jackson.annotation.JsonInclude.Include.NON_NULL;

import org.hyperledger.besu.ethereum.api.jsonrpc.internal.processor.TransactionTrace;
import org.hyperledger.besu.ethereum.api.jsonrpc.internal.results.Quantity;
import org.hyperledger.besu.ethereum.debug.TraceFrame;

import com.fasterxml.jackson.annotation.JsonInclude;
import com.fasterxml.jackson.annotation.JsonPropertyOrder;

@JsonInclude(NON_NULL)
@JsonPropertyOrder({
  &quot;creationMethod&quot;,
  &quot;callType&quot;,
  &quot;from&quot;,
  &quot;gas&quot;,
  &quot;input&quot;,
  &quot;to&quot;,
  &quot;init&quot;,
  &quot;author&quot;,
  &quot;rewardType&quot;,
  &quot;value&quot;,
  &quot;address&quot;,
  &quot;balance&quot;,
  &quot;refundAddress&quot;,
})
public class Action {

  private final String creationMethod;
  private final String callType;
  private final String from;
  private final String gas;
  private final String input;
  private final String to;
  private final String init;
  private final String value;
  private final String address;
  private final String balance;
  private final String refundAddress;
  private final String author;
  private final String rewardType;

  private Action(
      final String creationMethod,
      final String callType,
      final String from,
      final String gas,
      final String input,
      final String to,
      final String init,
      final String value,
      final String address,
      final String balance,
      final String refundAddress,
      final String author,
<span class="fc" id="L71">      final String rewardType) {</span>
<span class="fc" id="L72">    this.creationMethod = creationMethod;</span>
<span class="fc" id="L73">    this.callType = callType;</span>
<span class="fc" id="L74">    this.from = from;</span>
<span class="fc" id="L75">    this.gas = gas;</span>
<span class="fc" id="L76">    this.input = input;</span>
<span class="fc" id="L77">    this.to = to;</span>
<span class="fc" id="L78">    this.init = init;</span>
<span class="fc" id="L79">    this.value = value;</span>
<span class="fc" id="L80">    this.address = address;</span>
<span class="fc" id="L81">    this.balance = balance;</span>
<span class="fc" id="L82">    this.refundAddress = refundAddress;</span>
<span class="fc" id="L83">    this.author = author;</span>
<span class="fc" id="L84">    this.rewardType = rewardType;</span>
<span class="fc" id="L85">  }</span>

  public static Builder builder() {
<span class="fc" id="L88">    return new Builder();</span>
  }

  public String getCreationMethod() {
<span class="fc" id="L92">    return creationMethod;</span>
  }

  public String getCallType() {
<span class="fc" id="L96">    return callType;</span>
  }

  public String getFrom() {
<span class="fc" id="L100">    return from;</span>
  }

  public String getGas() {
<span class="fc" id="L104">    return gas;</span>
  }

  public String getInput() {
<span class="fc" id="L108">    return input;</span>
  }

  public String getTo() {
<span class="fc" id="L112">    return to;</span>
  }

  public String getValue() {
<span class="fc" id="L116">    return value;</span>
  }

  public String getInit() {
<span class="fc" id="L120">    return init;</span>
  }

  public String getAddress() {
<span class="fc" id="L124">    return address;</span>
  }

  public String getBalance() {
<span class="fc" id="L128">    return balance;</span>
  }

  public String getRefundAddress() {
<span class="fc" id="L132">    return refundAddress;</span>
  }

  public String getAuthor() {
<span class="fc" id="L136">    return author;</span>
  }

  public String getRewardType() {
<span class="fc" id="L140">    return rewardType;</span>
  }

  public static final class Builder {
    private String creationMethod;
    private String callType;
    private String from;
    private String gas;
    private String input;
    private String to;
    private String init;
    private String value;
    private String address;
    private String balance;
    private String refundAddress;
    private String author;
    private String rewardType;

    private Builder() {}

    public static Builder of(final Action action) {
<span class="nc" id="L161">      final Builder builder = new Builder();</span>
<span class="nc" id="L162">      builder.creationMethod = action.creationMethod;</span>
<span class="nc" id="L163">      builder.callType = action.callType;</span>
<span class="nc" id="L164">      builder.from = action.from;</span>
<span class="nc" id="L165">      builder.gas = action.gas;</span>
<span class="nc" id="L166">      builder.input = action.input;</span>
<span class="nc" id="L167">      builder.to = action.to;</span>
<span class="nc" id="L168">      builder.init = action.init;</span>
<span class="nc" id="L169">      builder.value = action.value;</span>
<span class="nc" id="L170">      builder.address = action.address;</span>
<span class="nc" id="L171">      builder.refundAddress = action.refundAddress;</span>
<span class="nc" id="L172">      builder.balance = action.balance;</span>
<span class="nc" id="L173">      builder.author = action.author;</span>
<span class="nc" id="L174">      builder.rewardType = action.rewardType;</span>
<span class="nc" id="L175">      return builder;</span>
    }

    public static Builder from(final TransactionTrace trace) {
<span class="fc" id="L179">      final Builder builder =</span>
          new Builder()
<span class="fc" id="L181">              .from(trace.getTransaction().getSender().toHexString())</span>
<span class="fc" id="L182">              .value(Quantity.create(trace.getTransaction().getValue()));</span>
<span class="fc bfc" id="L183" title="All 2 branches covered.">      if (!trace.getTraceFrames().isEmpty()) {</span>
<span class="fc" id="L184">        final TraceFrame traceFrame = trace.getTraceFrames().get(0);</span>
<span class="fc" id="L185">        builder.gas(</span>
            &quot;0x&quot;
<span class="fc" id="L187">                + Long.toHexString(</span>
<span class="fc" id="L188">                    traceFrame.getGasRemaining()</span>
<span class="fc" id="L189">                        + (traceFrame.getPrecompiledGasCost().orElse(0L))));</span>
      }
<span class="fc" id="L191">      return builder;</span>
    }

    public Builder creationMethod(final String creationMethod) {
<span class="fc" id="L195">      this.creationMethod = creationMethod;</span>
<span class="fc" id="L196">      return this;</span>
    }

    public Builder callType(final String callType) {
<span class="fc" id="L200">      this.callType = callType;</span>
<span class="fc" id="L201">      return this;</span>
    }

    public String getCallType() {
<span class="fc" id="L205">      return callType;</span>
    }

    public Builder from(final String from) {
<span class="fc" id="L209">      this.from = from;</span>
<span class="fc" id="L210">      return this;</span>
    }

    public String getFrom() {
<span class="fc" id="L214">      return from;</span>
    }

    public Builder gas(final String gas) {
<span class="fc" id="L218">      this.gas = gas;</span>
<span class="fc" id="L219">      return this;</span>
    }

    public Builder input(final String input) {
<span class="fc" id="L223">      this.input = input;</span>
<span class="fc" id="L224">      return this;</span>
    }

    public Builder to(final String to) {
<span class="fc" id="L228">      this.to = to;</span>
<span class="fc" id="L229">      return this;</span>
    }

    public Builder author(final String author) {
<span class="fc" id="L233">      this.author = author;</span>
<span class="fc" id="L234">      return this;</span>
    }

    public Builder rewardType(final String rewardType) {
<span class="fc" id="L238">      this.rewardType = rewardType;</span>
<span class="fc" id="L239">      return this;</span>
    }

    public String getTo() {
<span class="fc" id="L243">      return to;</span>
    }

    public Builder init(final String init) {
<span class="fc" id="L247">      this.init = init;</span>
<span class="fc" id="L248">      return this;</span>
    }

    public Builder value(final String value) {
<span class="fc" id="L252">      this.value = value;</span>
<span class="fc" id="L253">      return this;</span>
    }

    public Builder address(final String address) {
<span class="fc" id="L257">      this.address = address;</span>
<span class="fc" id="L258">      return this;</span>
    }

    public Builder balance(final String balance) {
<span class="fc" id="L262">      this.balance = balance;</span>
<span class="fc" id="L263">      return this;</span>
    }

    Builder refundAddress(final String refundAddress) {
<span class="fc" id="L267">      this.refundAddress = refundAddress;</span>
<span class="fc" id="L268">      return this;</span>
    }

    public String getGas() {
<span class="fc" id="L272">      return gas;</span>
    }

    public Action build() {
<span class="fc" id="L276">      return new Action(</span>
          creationMethod,
          callType,
          from,
          gas,
          input,
          to,
          init,
          value,
          address,
          balance,
          refundAddress,
          author,
          rewardType);
    }
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>